<!DOCTYPE html>
<html>
    <head>
      	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
      	<title>pub-sub</title>
      	<link rel="stylesheet" type="text/css" href="style.css">
			<script type="application/x-javascript" src="pubsub.js" ></script>
    </head>
    
    <body>

				<script type="text/javascript">


var eventRouter = new PubSub();
var output;

function writer(text) {
var p;
if (!(output instanceof Element)) {
output = document.getElementById('output');
}
p = document.createElement('p');
p.appendChild(document.createTextNode(text));
output.appendChild( p );
}

function foo(event, data) {
writer("foo: " + data);
}

function makeOne() {
return function one(event, data) {
writer("one: " + data);
}
}

var one1 = makeOne();

function one(event, data) {
writer("one: " + data);
}

function two(event, data) {
writer("two: " + data);
}

console.time('counter');
eventRouter.subscribe("click", one);
eventRouter.subscribe("click", two);
eventRouter.subscribe("click", one1);
eventRouter.subscribe("click", one);

eventRouter.subscribe("click", one);

writer("Firing event 'click', should be one, two, one1");
eventRouter.publish("click", "click data");

eventRouter.subscribe("move", one);
writer("Firing event 'move', should be one");
eventRouter.publish("move", "move data");

eventRouter.subscribe("move", two);
eventRouter.unsubscribe("move", one);

eventRouter.unsubscribe("move", one);

writer("Firing event 'move', should be two");
eventRouter.publish("move", "move data2");
eventRouter.off("click");
writer("Firing event 'click', should be none");
eventRouter.publish("click", "click data");

writer("Second part of task");
foo.subscribe('click');
two.subscribe('click');

writer("Firing event 'click', should be foo, two");
foo.globalEventRouter.publish('click', 'global event');

foo.unsubscribe('click');

writer("Firing event 'click', should be two");
foo.globalEventRouter.publish('click', 'global event');



</script>





    
    </body>
</html>